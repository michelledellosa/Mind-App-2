{"version":3,"file":"src_app_pages_shopping_shopping_module_ts.js","mappings":"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","sources":["./src/app/pages/shopping/shopping-routing.module.ts","./src/app/pages/shopping/shopping.module.ts","./src/app/pages/shopping/shopping.page.ts","./src/app/services/shopping.service.ts","./src/app/pages/shopping/shopping.page.html"],"sourcesContent":["import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { ShoppingPage } from './shopping.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: ShoppingPage\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule],\n})\nexport class ShoppingPageRoutingModule {}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\nimport { IonicModule } from '@ionic/angular';\nimport { ShoppingPageRoutingModule } from './shopping-routing.module';\n\nimport { ShoppingPage } from './shopping.page';\n\nimport { ComponentsModule } from 'src/app/components/components.module';\nimport { NgxPaginationModule } from 'ngx-pagination'; \n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    ComponentsModule,\n    NgxPaginationModule,\n    ShoppingPageRoutingModule\n  ],\n  declarations: [ShoppingPage]\n})\nexport class ShoppingPageModule {}\n","import { Component, OnInit } from '@angular/core';\nimport { DatePipe } from '@angular/common';\nimport { PopoverController } from '@ionic/angular';\nimport { PopoverCalendarComponent } from 'src/app/components/popover-calendar/popover-calendar.component';\n\nimport { CalendarPopupService } from 'src/app/services/calendar-popup.service';\nimport { ShoppingService } from \"src/app/services/shopping.service\";\nimport { CategoriesService } from 'src/app/services/categories.service';\n\n\n@Component({\n  selector: 'app-shopping',\n  templateUrl: './shopping.page.html',\n  styleUrls: ['./shopping.page.scss'],\n})\nexport class ShoppingPage implements OnInit {\n\n  initDefault= \"01/01/2000\";\n  currentDate1 = new Date().toDateString();\n  currentDate = this.datePipe.transform(this.currentDate1, \"dd/MM/yyyy\");\n\n  allDate: string = 'Select event dates';\n  dateInit: Date;\n  dateFinish: Date;\n  auxValidator;\n\n  public page: number;\n  user;\n  shoppings = [];\n  storeName = [];\n  stores = [];\n  itemsPage: number = 5;\n  shoppingLength=0;\n\n  constructor(\n    public datePipe: DatePipe,\n    public popoverController: PopoverController,\n    public calendarService: CalendarPopupService,\n    public shoppingService: ShoppingService,\n    public categoriesService: CategoriesService\n\n  ) { }\n\n  ngOnInit() {\n    this.user = JSON.parse(localStorage.getItem('userLogin'));\n    this.search(this.initDefault,this.currentDate1)\n  }\n\n  \n\n\n  search(dateInit, dateFinish) {\n    console.log(this.itemsPage)\n    let searchInit = this.datePipe.transform(dateInit, \"dd/MM/yyyy\");\n    let searchFinish = this.datePipe.transform(dateFinish, \"dd/MM/yyyy\");\n\n    if (dateInit == null || dateFinish == null) {\n      alert('Error en rango de fechas, por favor verifique')\n    } else {\n      if (dateInit > dateFinish) {\n        alert('La fecha inicial no puede ser mayor a la fecha final')\n      } else {\n        try {\n\n          this.categoriesService.getCategories().subscribe(allStores => {\n            this.stores = allStores.result;\n            this.shoppingService.getShoppings(searchInit, searchFinish).subscribe(shopping => {\n              this.shoppings = shopping.result;\n              this.shoppingLength= this.shoppings.length\n              for (let i = 0; i < this.stores.length; i++) {\n                this.storeName[i] = this.stores[i].Establecimiento\n              }\n            })\n\n          })\n\n        } catch (err) {\n          console.log(err)\n        }\n      }\n    }\n  }\n\n  getStoreName(id) {\n    this.categoriesService.getCategories().subscribe(allStores => {\n      this.stores = allStores.result;\n      this.stores.filter(resp => { return resp }).map(data => {\n        if (data.Id == id) {\n          return data.Establecimiento\n        }\n      })\n    })\n  }\n}\n","import { Injectable } from '@angular/core';\nimport { HttpClient, HttpHeaders, HttpParams } from '@angular/common/http';\nimport { environment } from 'src/environments/environment';\nimport { CategoriesService } from './categories.service';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class ShoppingService {\n  apiUrl = environment.API\n  user;\n\n\n  constructor(\n    private http: HttpClient,\n    private categoriesService: CategoriesService\n  ) { }\n\n  getShoppings(dateInit, dateFinish) {\n\n    if (localStorage.getItem('userLogin') != null) {\n      this.user = JSON.parse(localStorage.getItem('userLogin'));\n      \n      let headers = {\n        'Authorization': this.user.token\n      }\n      let body = {\n        \"cualSP\":\"14\",\n        \"Dato0\":\"\", \n        \"Dato01\":JSON.stringify(this.user.id_login),\n        \"Dato02\":dateInit,\n        \"Dato03\":dateFinish,\n        \"Dato04\":\"\"\n      }\n\n      return this.http.post<any>(this.apiUrl + '/clientesManejo', body, { 'headers': headers })\n\n    } else {\n      return \n    }\n  }\n\n  getReferrals() {\n    if (localStorage.getItem('userLogin') != null) {\n      this.user = JSON.parse(localStorage.getItem('userLogin'));\n\n      let headers = {\n        'Authorization': this.user.token\n      }\n\n      let body = {\n        \"cualSP\": \"8\",\n        \"Dato0\": \"1\",\n        \"Dato01\": \"0\",\n        \"Dato02\": JSON.stringify(this.user.id_login)\n      }\n\n      return this.http.post<any>(this.apiUrl + '/clientesManejo', body, { 'headers': headers })\n\n    } else {\n      return\n    }\n  }\n\n\n}\n","export default \"<app-header2 [title]=\\\"'Mis Compras'\\\" [go]=\\\"'home'\\\"></app-header2>\\n\\n<ion-content class=\\\"ion-padding container-shopping\\\" >\\n  <div class=\\\"title-shopping\\\">\\n    Historial Compras\\n  </div>  \\n\\n  <div class=\\\"calendar-options\\\">\\n    <div class=\\\"calendar-inputs\\\" >\\n      <div style=\\\"margin: 0 auto ;\\\">\\n        <input type=\\\"date\\\" class=\\\"input-date\\\" [(ngModel)]=\\\"dateInit\\\" >\\n      \\n        <input type=\\\"date\\\" class=\\\"input-date\\\" [(ngModel)]=\\\"dateFinish\\\">\\n      </div>\\n\\n  </div>\\n\\n  <div class=\\\"buttton-container\\\">\\n    <ion-button class=\\\"button-search\\\" style=\\\"font-size: 12px;\\\" color=\\\"secondary\\\">\\n      <label class=\\\"text-button\\\" (click)=\\\"search(dateInit,dateFinish)\\\" >Buscar</label>\\n    </ion-button>\\n  </div>\\n\\n  </div>\\n  <div style=\\\"display: flex; margin-top: 5%;\\\">\\n    <div class=\\\"center-vh button-style\\\" style=\\\"width: 30%; font-size: 12px;height: 40px;\\\">\\n        <label>Mostrar</label>\\n    </div>\\n    <div style=\\\"width: 20%; font-size: 12px;  height: 40px;margin-top: -2%;\\\">\\n      <ion-item>\\n        \\n          <ion-select style=\\\"width: 100%;\\\" [(ngModel)]=\\\"itemsPage\\\" placeholder=\\\"5\\\">\\n              <ion-select-option value=\\\"5\\\" [selected]=\\\"5\\\">5</ion-select-option>\\n              <ion-select-option value=\\\"10\\\">10</ion-select-option>\\n              <ion-select-option value=\\\"15\\\">15</ion-select-option>\\n              <ion-select-option value=\\\"20\\\">20</ion-select-option>\\n          </ion-select>\\n      </ion-item>\\n  </div>\\n    <div class=\\\"center-vh button-style\\\" style=\\\"width: 50%; font-size: 12px; height: 40px;\\\">\\n        <label>Registros por página</label>\\n    </div>\\n\\n</div>\\n\\n  <div class=\\\"table-responsive\\\" style=\\\"padding: 15% 2%;\\\">\\n    <table class=\\\"table table-hover\\\">\\n      <thead>\\n        <tr>\\n          <th scope=\\\"col\\\" class=\\\"space-th-td\\\">Establecimiento</th>\\n          <th scope=\\\"col\\\" class=\\\"space-th-td\\\">Descripción</th>\\n          <th scope=\\\"col\\\" class=\\\"space-th-td\\\">Fecha</th>\\n          <th scope=\\\"col\\\" class=\\\"space-th-td\\\">Valor</th>\\n          \\n        </tr>\\n      </thead>\\n      <tbody>\\n        <ng-container *ngIf=\\\"shoppings.length!=0\\\" >\\n          <tr *ngFor=\\\"let shopping of shoppings| paginate: { itemsPerPage:itemsPage, currentPage:page }\\\">\\n            \\n            <td class=\\\"space-th-td\\\"> {{storeName[1]}} </td>\\n            <td class=\\\"space-th-td\\\"> {{shopping.Descripcion}} </td>\\n            <td class=\\\"space-th-td\\\"> {{shopping.FechaCreacion}} </td>\\n            <td class=\\\"space-th-td\\\"> {{shopping.Valor_de_venta[0]}} </td>\\n           \\n          </tr>\\n          <ng-container *ngIf=\\\"shoppings.length == 0\\\">\\n            No ha realizado ninguna compra\\n          </ng-container>\\n        </ng-container>\\n\\n      </tbody>\\n    </table>\\n    <div style=\\\"text-align: center;margin-top: 10%;\\\">\\n      <pagination-controls \\n      (pageChange)=\\\"page = $event\\\" \\n        previousLabel=\\\"Anterior\\\" \\n        nextLabel=\\\"Siguiente\\\">\\n    </pagination-controls>\\n    </div>\\n    \\n  </div>\\n\\n    <div style=\\\"text-align: right;\\\">\\n      <ion-button class=\\\"button-total\\\" color=\\\"secondary\\\">\\n        <label class=\\\"text-button\\\" >Total Compras {{shoppingLength}}</label>\\n      </ion-button>\\n    </div>\\n  \\n \\n</ion-content>\";"],"names":[],"sourceRoot":"webpack:///"}