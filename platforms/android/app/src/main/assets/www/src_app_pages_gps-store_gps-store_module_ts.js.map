{"version":3,"file":"src_app_pages_gps-store_gps-store_module_ts.js","mappings":"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","sources":["./src/app/pages/gps-store/gps-store-routing.module.ts","./src/app/pages/gps-store/gps-store.module.ts","./src/app/pages/gps-store/gps-store.page.ts","./src/app/pages/gps-store/gps-store.page.html"],"sourcesContent":["import { NgModule } from '@angular/core';\r\nimport { Routes, RouterModule } from '@angular/router';\r\n\r\nimport { GpsStorePage } from './gps-store.page';\r\n\r\nconst routes: Routes = [\r\n  {\r\n    path: '',\r\n    component: GpsStorePage\r\n  }\r\n];\r\n\r\n@NgModule({\r\n  imports: [RouterModule.forChild(routes)],\r\n  exports: [RouterModule],\r\n})\r\nexport class GpsStorePageRoutingModule {}\r\n","import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { FormsModule } from '@angular/forms';\r\nimport { IonicModule } from '@ionic/angular';\r\n\r\nimport { GpsStorePageRoutingModule } from './gps-store-routing.module';\r\nimport { GpsStorePage } from './gps-store.page';\r\n\r\nimport { ComponentsModule } from 'src/app/components/components.module';\r\nimport { SharedModule } from 'src/app/shared/shared.module';\r\nimport { FontAwesomeModule } from '@fortawesome/angular-fontawesome'\r\n\r\n@NgModule({\r\n  imports: [\r\n    CommonModule,\r\n    FormsModule,\r\n    IonicModule,\r\n    GpsStorePageRoutingModule,\r\n    ComponentsModule,\r\n    SharedModule,\r\n    FontAwesomeModule\r\n  ],\r\n  declarations: [GpsStorePage]\r\n})\r\nexport class GpsStorePageModule {}\r\n","import { Component, OnInit } from '@angular/core';\r\nimport { AgmService } from 'src/app/services/agm.service';\r\nimport { CategoriesService } from 'src/app/services/categories.service';\r\nimport { LocationService } from 'src/app/services/location.service';\r\n\r\nimport { ActivatedRoute, Router } from '@angular/router';\r\n\r\ndeclare var google;\r\n\r\ninterface Marker {\r\n  position: {\r\n    lat: number,\r\n    lng: number,\r\n  };\r\n  title: string;\r\n}\r\n\r\n@Component({\r\n  selector: 'app-gps-store',\r\n  templateUrl: './gps-store.page.html',\r\n  styleUrls: ['./gps-store.page.scss'],\r\n})\r\nexport class GpsStorePage implements OnInit {\r\n\r\n  map = null;\r\n  recipeId;\r\n\r\n  //retorno de la ruta optima\r\n  directionsService = new google.maps.DirectionsService();\r\n  //renderiza ruta en el mapa\r\n  directionsDisplay = new google.maps.DirectionsRenderer();\r\n\r\n\r\n\r\n\r\n  store: any = [];\r\n  detail: any = [];\r\n\r\n  origin = {\r\n    position: {\r\n      lat: 0,\r\n      lng: 0,\r\n    },\r\n    title: 'origin'\r\n  }\r\n\r\n  destination: {\r\n    position: {\r\n      lat: '',\r\n      lng: '',\r\n    },\r\n    title: ''\r\n  }\r\n  constructor(\r\n    private categoriesServices: CategoriesService,\r\n    private activatedRoute: ActivatedRoute,\r\n    private router: Router,\r\n    private agmService: AgmService,\r\n    public locationService: LocationService\r\n  ) { }\r\n\r\n  ngOnInit() {\r\n    this.activatedRoute.paramMap.subscribe(data => {\r\n      this.recipeId = data.get('id_store');\r\n      console.log('recipe id gps map component = '+this.recipeId);\r\n      this.loadMap()\r\n   })\r\n\r\n    \r\n\r\n  }\r\n\r\n  loadMap() {\r\n    this.locationService.gpsActivated.subscribe((res: any) => {\r\n      console.log('accors = '+ JSON.stringify(res))\r\n       if (res==null) { \r\n         console.log('Por favor active su gps');\r\n         this.router.navigate(['pages/store-detail/' + this.recipeId]);\r\n       }\r\n       this.origin.position.lat = res.latitude\r\n       this.origin.position.lng = res.longitude\r\n       console.log('this.origin.position.lat)',this.origin.position.lat);\r\n      \r\n       // create a new map by passing HTMLElement - acceder al elemento con id map\r\n       const mapEle: HTMLElement = document.getElementById('map');\r\n   \r\n       //indicadores\r\n       const indicatorsEle: HTMLElement = document.getElementById('indicators');\r\n   \r\n       // create map\r\n   \r\n       this.map = new google.maps.Map(mapEle, {\r\n         center: new google.maps.LatLng(8.353993,-62.6802515),\r\n         zoom: 13\r\n       })\r\n       \r\n       // servicio de display, con referencia al mapa para mostrar los marcadores\r\n       this.directionsDisplay.setMap(this.map);\r\n       //panel para mostrar indicaciones\r\n       this.directionsDisplay.setPanel(indicatorsEle);\r\n   \r\n       //renderiza map con todos sus elementos\r\n       google.maps.event.addListenerOnce(this.map, 'idle', () => {\r\n         mapEle.classList.add('show-map');\r\n         //this.renderMarkers();\r\n         this.calculateRoute();\r\n       })\r\n\r\n     });    \r\n  }\r\n\r\n  addMarker(marker: Marker) {\r\n\r\n    return new google.maps.Marker({\r\n      position: marker.position,\r\n      map: this.map,\r\n      title: marker.title\r\n    });\r\n  }\r\n\r\n  private calculateRoute() {\r\n    console.log('this.origin.position.lng = calculateRoute()' + this.origin.position.lng)\r\n    this.activatedRoute.paramMap.subscribe(data => {\r\n\r\n      let recipeId = data.get('id_store');\r\n      this.categoriesServices.getCategories()\r\n        .subscribe(data => {\r\n          this.store = data.result;\r\n          this.detail = this.store.find(res => { return res.Id == recipeId });\r\n         console.log(this.detail);\r\n          this.directionsService.route({\r\n            \r\n            origin: new google.maps.LatLng(this.origin.position.lat, this.origin.position.lng),//\"cambridge, ma\",\r\n            destination: new google.maps.LatLng(this.detail.Latitud, this.detail.Logitud),//\"boston, ma\",\r\n            \r\n           //Datos para pruebas en el navegador\r\n            /*origin: new google.maps.LatLng(8.353993, -62.6802515),\r\n            destination: new google.maps.LatLng(6.2227041, -75.5816355),*/\r\n\r\n            //tipo de viaje\r\n            travelMode: google.maps.TravelMode.DRIVING,\r\n          }, (response, status) => {\r\n            if (status === google.maps.DirectionsStatus.OK) {\r\n              this.directionsDisplay.setDirections(response);\r\n            } else {\r\n              alert('Erro al Calcular las rutas');\r\n              //alert('Could not display directions due to: ' + status);\r\n            }\r\n          });\r\n\r\n        })\r\n    });\r\n\r\n  }\r\n\r\n}","export default \"<app-header2 [title]=\\\"detail.Establecimiento\\\"></app-header2>\\r\\n\\r\\n<ion-content>\\r\\n  <ion-content>\\r\\n    <div id=\\\"map\\\"></div>\\r\\n    <div\\r\\n      id=\\\"indicators\\\"\\r\\n    ></div>  \\r\\n  </ion-content>\\r\\n  <!--<app-gps-map \\r\\n    [latOrigin]=\\\"origin.position.lat\\\"\\r\\n    [lngOrigin]=\\\"origin.position.lng\\\"\\r\\n  >\\r\\n  </app-gps-map>  -->\\r\\n</ion-content>\\r\\n \";"],"names":[],"sourceRoot":"webpack:///"}