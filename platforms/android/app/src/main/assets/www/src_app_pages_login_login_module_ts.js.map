{"version":3,"file":"src_app_pages_login_login_module_ts.js","mappings":";;;;;;;;;;;;;;;;;;AAAyC;AACc;AAEd;AAEzC,MAAM,MAAM,GAAW;IACrB;QACE,IAAI,EAAE,EAAE;QACR,SAAS,EAAE,kDAAS;KACrB;CACF,CAAC;IAMW,sBAAsB,SAAtB,sBAAsB;CAAG;AAAzB,sBAAsB;IAJlC,uDAAQ,CAAC;QACR,OAAO,EAAE,CAAC,kEAAqB,CAAC,MAAM,CAAC,CAAC;QACxC,OAAO,EAAE,CAAC,yDAAY,CAAC;KACxB,CAAC;GACW,sBAAsB,CAAG;AAAH;;;;;;;;;;;;;;;;;;;;;;;;;AChBM;AACM;AACF;AAC2B;AAE3B;AAEmB;AAEvB;AACmB;IAa/C,eAAe,SAAf,eAAe;CAAG;AAAlB,eAAe;IAX3B,uDAAQ,CAAC;QACR,OAAO,EAAE;YACP,yDAAY;YACZ,uDAAW;YACX,uDAAW;YACX,yEAAsB;YACtB,sEAAY;YACZ,kFAAgB;SACjB;QACD,YAAY,EAAE,CAAC,kDAAS,CAAC;KAC1B,CAAC;GACW,eAAe,CAAG;AAAH;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACvBiC;AAEZ;AACA;AACR;AACqB;AAEJ;AACM;AAEf;IAOpC,SAAS,SAAT,SAAS;IAgBpB,YACU,IAAgB,EAChB,YAA0B,EAC1B,cAA6B,EAC5B,OAAe,EAChB,UAAsB,EACtB,MAAa,EACb,eAAgC;QANhC,SAAI,GAAJ,IAAI,CAAY;QAChB,iBAAY,GAAZ,YAAY,CAAc;QAC1B,mBAAc,GAAd,cAAc,CAAe;QAC5B,YAAO,GAAP,OAAO,CAAQ;QAChB,eAAU,GAAV,UAAU,CAAY;QACtB,WAAM,GAAN,MAAM,CAAO;QACb,oBAAe,GAAf,eAAe,CAAiB;QArB1C,YAAO,GAAC;YACN,KAAK,EAAC,EAAE;YACR,QAAQ,EAAC,EAAE;SACZ;QAED,aAAQ,GAAC;YACP,KAAK,EAAC,EAAE;YACR,QAAQ,EAAC,EAAE;YACX,KAAK,EAAC,EAAE;YACR,QAAQ,EAAC,CAAC;YACV,QAAQ,EAAC,CAAC;YACV,UAAU,EAAC,EAAE;SACd;IAUG,CAAC;IAEL,gBAAgB;IACjB,CAAC;IACA,QAAQ,KAAI,CAAC;IAGf,YAAY;QACV,IAAG,IAAI,CAAC,aAAa,EAAE,EAAC;YACzB,iDAAiD;YAC3C,IAAI,CAAC,YAAY,CAAC,YAAY,CAAC,IAAI,CAAC,OAAO,CAAC,KAAK,EAAC,IAAI,CAAC,OAAO,CAAC,QAAQ,CAAC;iBACvE,SAAS,CAAC,IAAI,GAAE;gBACf,IAAI,KAAK,GAAK,EAAE,CAAC;gBACjB,IAAI,KAAK,GAAK,EAAE,CAAC;gBAChB,KAAK,GAAC,IAAI,CAAC;gBACX,+CAA+C;gBAC/C,IAAG,KAAK,CAAC,MAAM,IAAE,CAAC,EAAC;oBACjB,IAAI,CAAC,QAAQ,CAAC,KAAK,GAAE,KAAK,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,MAAM,CAAC;oBAC3C,IAAI,CAAC,QAAQ,CAAC,KAAK,GAAE,SAAS,GAAC,KAAK,CAAC,KAAK,CAAC;oBAC3C,IAAI,CAAC,QAAQ,CAAC,QAAQ,GAAE,KAAK,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,MAAM,CAAC;oBAC9C,IAAI,CAAC,QAAQ,CAAC,UAAU,GAAE,KAAK,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,eAAe,CAAC;oBACzD,IAAI,CAAC,QAAQ,CAAC,QAAQ,GAAC,KAAK,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,gBAAgB,CAAC;oBACvD,IAAI,CAAC,QAAQ,CAAC,QAAQ,GAAC,KAAK,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,iBAAiB;oBAEvD,IAAI,CAAC,UAAU,CAAC,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC;oBACzC,YAAY,CAAC,OAAO,CAAC,WAAW,EAAC,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC,CAAC;oBAChE,IAAI,CAAC,YAAY,CAAC,QAAQ,CAAC,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC;oBAG/C,IAAI,CAAC,YAAY,CAAC,IAAI,CAAC,QAAQ,CAAC,QAAQ,CAAC;oBACzC,IAAI,CAAC,MAAM,CAAC,QAAQ,CAAC,CAAC,OAAO,CAAC,CAAC,CAAC;iBACjC;gBAED,IAAG,KAAK,CAAC,MAAM,IAAE,CAAC,EAAC;oBACjB,KAAK,CAAC,uBAAuB,CAAC,CAAC;oBAC/B,wCAAwC;iBACzC;YACJ,CAAC,CAAC,CAAC;YACJ;;iBAEK;SACR;IACH,CAAC;IAEC,aAAa;QACX,IAAI,MAAM,GAAG,KAAK,CAAC;QACnB,IAAI,IAAI,CAAC,OAAO,CAAC,KAAK,CAAC,MAAM,IAAI,CAAC,EAAE;YAElC,IAAI,IAAI,CAAC,OAAO,CAAC,QAAQ,CAAC,MAAM,IAAI,CAAC,EAAE;gBAErC,MAAM,GAAG,IAAI,CAAC;aACf;iBAAM;gBACL,KAAK,CAAC,uBAAuB,CAAC,CAAC;aAChC;SACF;aAAM;YACL,KAAK,CAAC,uBAAuB,CAAC,CAAC;SAChC;QACD,OAAO,MAAM,CAAC;IAChB,CAAC;IAEK,YAAY,CAAC,KAAY;;YAE7B,MAAM,KAAK,GAAG,MAAM,IAAI,CAAC,eAAe,CAAC,MAAM,CAAC;gBAE9C,oBAAoB;gBACpB,OAAO,EAAE,aAAa,GAAC,KAAK;gBAC5B,OAAO,EAAE;oBACP;wBACE,IAAI,EAAE,SAAS;wBACf,IAAI,EAAE,IAAI;wBACV,QAAQ,EAAE,WAAW;qBACtB;iBAAC;aAEL,CAAC,CAAC;YACH,MAAM,KAAK,CAAC,OAAO,EAAE,CAAC;YACtB,IAAI,MAAM,GAAG,MAAM,KAAK,CAAC,YAAY,EAAE,CAAC;QAE1C,CAAC;KAAA;CACF;;YArHQ,4DAAU;YAGV,wEAAY;YAGZ,qEAAc;YALd,2DAAO;YAIP,oEAAU;YAHV,mDAAM;YAMN,2DAAe;;AAOX,SAAS;IALrB,yDAAS,CAAC;QACT,QAAQ,EAAE,WAAW;QACrB,mLAAgC;;KAEjC,CAAC;GACW,SAAS,CAsGrB;AAtGqB;;;;;;;;;;;;;;;;;;;;ACjBqB;AACM;AAC2B;IAI/D,cAAc,SAAd,cAAc;IAEzB,YACS,OAAgB,EACf,aAA4B;QAD7B,YAAO,GAAP,OAAO,CAAS;QACf,kBAAa,GAAb,aAAa,CAAe;IAClC,CAAC;IAEC,IAAI;;YACR,MAAM,OAAO,GAAG,MAAM,IAAI,CAAC,OAAO,CAAC,MAAM,EAAE,CAAC;YAC5C,IAAI,CAAC,OAAO,GAAG,OAAO,CAAC;YAEvB,IAAI,CAAC,QAAQ,EAAE,CAAC;QAClB,CAAC;KAAA;IAEK,QAAQ,CAAC,OAAO,EAAE,QAAQ;;YAC9B,MAAM,IAAI,CAAC,OAAO,CAAC,GAAG,CAAC,cAAc,EAAE,EAAE,OAAO,EAAE,OAAO,EAAE,QAAQ,EAAE,QAAQ,EAAE,CAAC;QAClF,CAAC;KAAA;IAEK,QAAQ;;YACZ,MAAM,IAAI,CAAC,OAAO,CAAC,GAAG,CAAC,cAAc,CAAC,CAAC,IAAI,CAAC,CAAC,GAAG,EAAE,EAAE;gBAClD,OAAO,CAAC,GAAG,CAAC,gBAAgB,GAAC,IAAI,CAAC,SAAS,CAAC,GAAG,CAAC,CAAC;YACnD,CAAC,CAAC;QACJ,CAAC;KAAA;IAEK,cAAc;;YAClB,OAAO,MAAM,IAAI,CAAC,OAAO,CAAC,GAAG,CAAC,cAAc,CAAC,CAAC;QAChD,CAAC;KAAA;CACF;;YAhCQ,2DAAO;YACP,sFAAa;;AAIT,cAAc;IAH1B,yDAAU,CAAC;QACV,UAAU,EAAE,MAAM;KACnB,CAAC;GACW,cAAc,CA2B1B;AA3B0B;;;;;;;;;;;;;;;ACN3B,iEAAe,04CAA04C,8YAA8Y,icAAic","sources":["./src/app/pages/login/login-routing.module.ts","./src/app/pages/login/login.module.ts","./src/app/pages/login/login.page.ts","./src/app/services/storage.service.ts","./src/app/pages/login/login.page.html"],"sourcesContent":["import { NgModule } from '@angular/core';\r\nimport { Routes, RouterModule } from '@angular/router';\r\n\r\nimport { LoginPage } from './login.page';\r\n\r\nconst routes: Routes = [\r\n  {\r\n    path: '',\r\n    component: LoginPage\r\n  }\r\n];\r\n\r\n@NgModule({\r\n  imports: [RouterModule.forChild(routes)],\r\n  exports: [RouterModule],\r\n})\r\nexport class LoginPageRoutingModule {}\r\n","import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { FormsModule } from '@angular/forms';\r\nimport { ComponentsModule } from 'src/app/components/components.module';\r\n\r\nimport { IonicModule } from '@ionic/angular';\r\n\r\nimport { LoginPageRoutingModule } from './login-routing.module';\r\n\r\nimport { LoginPage } from './login.page';\r\nimport { SharedModule } from 'src/app/shared/shared.module';\r\n\r\n@NgModule({\r\n  imports: [\r\n    CommonModule,\r\n    FormsModule,\r\n    IonicModule,\r\n    LoginPageRoutingModule,\r\n    SharedModule,\r\n    ComponentsModule\r\n  ],\r\n  declarations: [LoginPage]\r\n})\r\nexport class LoginPageModule {}\r\n","import { Component, OnInit, ViewChild } from '@angular/core';\r\nimport { InAppBrowser } from '@awesome-cordova-plugins/in-app-browser/ngx';\r\nimport { HttpClient } from '@angular/common/http'\r\nimport { Storage } from '@ionic/storage-angular';\r\nimport { Router } from '@angular/router';\r\nimport { LoginService } from 'src/app/services/login.service';\r\n\r\nimport { AgmService } from 'src/app/services/agm.service';\r\nimport { StorageService } from '../../services/storage.service';\r\nimport { FormsModule, FormGroup, NgForm } from '@angular/forms';\r\nimport { AlertController } from '@ionic/angular';\r\n\r\n@Component({\r\n  selector: 'app-login',\r\n  templateUrl: './login.page.html',\r\n  styleUrls: ['./login.page.scss'],\r\n})\r\nexport class LoginPage implements OnInit {\r\n  event;\r\n  usuario={\r\n    email:'',\r\n    password:''\r\n  }\r\n\r\n  userData={\r\n    email:'',\r\n    fullName:'',    \r\n    token:'',\r\n    id_store:0,\r\n    id_login:0,\r\n    name_store:''\r\n  }\r\n\r\n  constructor(\r\n    private http: HttpClient,\r\n    private loginService: LoginService, \r\n    private storageService:StorageService,\r\n    private  storage:Storage,\r\n    private agmService: AgmService,\r\n    private router:Router,\r\n    private alertController: AlertController\r\n  ) { }\r\n\r\n  ionViewWillEnter() {  \r\n }\r\n  ngOnInit() {}\r\n\r\n  \r\nonSubmitData(){\r\n  if(this.validarCampos()){\r\n //   console.log(JSON.stringify(this.formulario))\r\n       this.loginService.validateUser(this.usuario.email,this.usuario.password)\r\n       .subscribe(data=>{\r\n         let temp1:any=[];\r\n         let array:any=[];\r\n          temp1=data;\r\n          //console.log('temp1 = '+JSON.stringify(temp1))\r\n          if(temp1.result==1){\r\n            this.userData.email= temp1.datos[0].Correo;\r\n            this.userData.token= 'Bearer '+temp1.token;\r\n            this.userData.id_store= temp1.datos[0].Tienda;\r\n            this.userData.name_store= temp1.datos[0].Establecimiento;\r\n            this.userData.id_login=temp1.datos[0].Id_Persona_Login;\r\n            this.userData.fullName=temp1.datos[0].NombresyApellidos\r\n            \r\n            this.agmService.user.next(this.userData);\r\n            localStorage.setItem('userLogin',JSON.stringify(this.userData));\r\n            this.loginService.userData.next(this.userData);\r\n      \r\n\r\n            this.presentAlert(this.userData.fullName)\r\n            this.router.navigate(['/home']);\r\n          }\r\n\r\n          if(temp1.result==2){\r\n            alert('Usuario no registrado');\r\n            //this.router.navigate(['/pages/login'])\r\n          }\r\n       });\r\n      /*this.agmService.user.subscribe(userData=>{\r\n         //console.log('userData = '+JSON.stringify(userData))\r\n       })*/\r\n  }\r\n}\r\n\r\n  validarCampos() {\r\n    let valido = false;\r\n    if (this.usuario.email.length != 0) {\r\n\r\n      if (this.usuario.password.length != 0) {\r\n\r\n        valido = true;\r\n      } else {\r\n        alert('Error de Credenciales');\r\n      }\r\n    } else {\r\n      alert('Error de Credenciales');\r\n    }\r\n    return valido;\r\n  }\r\n\r\n  async presentAlert(email:string) {\r\n\r\n    const alert = await this.alertController.create({\r\n\r\n      // subHeader: 'Acc',\r\n      message: 'Bienvenido '+email,\r\n      buttons: [\r\n        {\r\n          text: 'ACEPTAR',\r\n          role: 'si',\r\n          cssClass: 'secondary'\r\n        }]\r\n\r\n    });\r\n    await alert.present();\r\n    let result = await alert.onDidDismiss();\r\n\r\n  }\r\n}\r\n","import { Injectable } from '@angular/core';\r\nimport { Storage } from '@ionic/storage-angular';\r\nimport { NativeStorage } from '@awesome-cordova-plugins/native-storage/ngx';\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class StorageService {\r\n\r\n  constructor(\r\n    public storage: Storage,\r\n    private nativeStorage: NativeStorage\r\n  ) { }\r\n\r\n  async init() {\r\n    const storage = await this.storage.create();\r\n    this.storage = storage;\r\n\r\n    this.getValue();\r\n  }\r\n\r\n  async setValue(usuario, password) {\r\n    await this.storage.set('credenciales', { usuario: usuario, password: password })\r\n  }\r\n\r\n  async getValue() {\r\n    await this.storage.get('credenciales').then((val) => {\r\n      console.log('Credenciales= '+JSON.stringify(val))\r\n    })\r\n  }\r\n\r\n  async ValidarUsuario() {\r\n    return await this.storage.get(\"credenciales\");\r\n  }\r\n}\r\n","export default \"<!--<ion-header>\\r\\n  <ion-toolbar color=\\\"primary\\\">\\r\\n    <ion-title class=\\\"centrado titleHeader\\\">Iniciar Sesión</ion-title>\\r\\n  </ion-toolbar>\\r\\n</ion-header>-->\\r\\n\\r\\n<app-header2 [title]=\\\"'Iniciar Sesión'\\\" [go]=\\\"'home'\\\"></app-header2>\\r\\n<br>\\r\\n<ion-content>\\r\\n<ion-card-header  color=\\\"#f36b22\\\" text-rigth>\\r\\n  <ion-label color=\\\"medium\\\">  Si tienes una cuenta con nosotros, inicia sesión. </ion-label> \\r\\n \\r\\n</ion-card-header>\\r\\n\\r\\n<form #formulario=\\\"ngForm\\\"  (ngSubmit)=\\\"onSubmitData()\\\">\\r\\n\\r\\n  <ion-list no-Line>\\r\\n      <ion-item> \\r\\n          <ion-input  type=\\\"email\\\" \\r\\n                      name=\\\"email\\\" \\r\\n                      [(ngModel)]=\\\"usuario.email\\\"  \\r\\n                      placeholder=\\\"Usuario o Correo Electronico \\\" \\r\\n                      required>\\r\\n                  \\r\\n          </ion-input>\\r\\n      </ion-item>\\r\\n      <ion-item>\\r\\n          <ion-input  type=\\\"password\\\"  \\r\\n                      name=\\\"password\\\" \\r\\n                      [(ngModel)]=\\\"usuario.password\\\"  \\r\\n                      placeholder=\\\"Contraseña\\\">\\r\\n              \\r\\n          </ion-input>\\r\\n      </ion-item>\\r\\n  </ion-list>\\r\\n  <br>\\r\\n  <br>\\r\\n  <ion-grid>\\r\\n      <ion-row>\\r\\n          <ion-button     expand=\\\"full\\\" \\r\\n                          class=\\\"boton_tamanio centrado\\\" \\r\\n                          round  style=\\\"--background:#CC9C61;\\\"\\r\\n\\r\\n                          routerLink=\\\"/home\\\"\\r\\n                          >\\r\\n      \\r\\n      REGRESAR\\r\\n  </ion-button>\\r\\n  <ion-button     expand=\\\"full\\\" \\r\\n                  type=\\\"submit\\\"\\r\\n                  \\r\\n                  [disabled]=\\\"formulario.invalid\\\"\\r\\n                  class=\\\"boton_tamanio centrado\\\" \\r\\n                  round style=\\\"--background:#CC9C61;\\\" \\r\\n                  \\r\\n                  >\\r\\n              \\r\\n                     \\r\\n      INICIAR SESIÓN\\r\\n  </ion-button>\\r\\n\\r\\n      </ion-row>\\r\\n  </ion-grid>\\r\\n      \\r\\n  \\r\\n\\r\\n</form>\\r\\n\\r\\n<br>\\r\\n<br>\\r\\n\\r\\n             \\r\\n  \\r\\n                \\r\\n  <!--<ion-button class=\\\"boton_tamanio margin-left: 100%\\\" ion-button round color=\\\"primary\\\" routerLink=\\\"/home\\\" >Regresar</ion-button>-->\\r\\n\\r\\n\\r\\n\\r\\n</ion-content>\";"],"names":[],"sourceRoot":"webpack:///"}